# Sequence Diagrams for HBnB API Calls

This document contains sequence diagrams (using Mermaid.js) and explanations for four different API calls in the HBnB application.  
Each diagram shows the interaction between the **Presentation Layer (API)**, **Business Logic Layer (Models/Services)**, and **Persistence Layer (Database)**.

---

## 1. User Registration

```mermaid
sequenceDiagram
    participant User
    participant API
    participant BusinessLogic as UserModel
    participant Database

    User->>API: POST /users (email, password, etc.)
    API->>BusinessLogic: validate_input(data)
    BusinessLogic->>Database: INSERT new user
    Database-->>BusinessLogic: success
    BusinessLogic-->>API: user_created_response
    API-->>User: 201 Created (user_id, token)
```

**Explanation:**  
- User sends registration details to the API.  
- API forwards the data to the business logic layer for validation and processing.  
- User data is inserted into the database.  
- A success response with a new `user_id` (and possibly a token) is returned.

---

## 2. Place Creation

```mermaid
sequenceDiagram
    participant User
    participant API
    participant BusinessLogic as PlaceModel
    participant Database

    User->>API: POST /places (title, description, price, etc.)
    API->>BusinessLogic: validate_and_build_place(data, user_id)
    BusinessLogic->>Database: INSERT new place
    Database-->>BusinessLogic: success
    BusinessLogic-->>API: place_created_response
    API-->>User: 201 Created (place_id)
```

**Explanation:**  
- User sends a request to create a new place.  
- API passes the request to the business logic layer.  
- The business logic creates a `Place` object and saves it to the database.  
- API responds with the new `place_id`.

---

## 3. Review Submission

```mermaid
sequenceDiagram
    participant User
    participant API
    participant BusinessLogic as ReviewModel
    participant Database

    User->>API: POST /places/{id}/reviews (rating, comment)
    API->>BusinessLogic: validate_and_build_review(data, user_id, place_id)
    BusinessLogic->>Database: INSERT new review
    Database-->>BusinessLogic: success
    BusinessLogic-->>API: review_created_response
    API-->>User: 201 Created (review_id)
```

**Explanation:**  
- User submits a review for a place.  
- API validates the request and forwards it to the business logic.  
- Review is stored in the database.  
- API confirms creation with a `review_id`.

---

## 4. Fetching a List of Places

```mermaid
sequenceDiagram
    participant User
    participant API
    participant BusinessLogic as PlaceService
    participant Database

    User->>API: GET /places?city=Paris&max_price=100
    API->>BusinessLogic: fetch_places(filters)
    BusinessLogic->>Database: SELECT * FROM places WHERE filters
    Database-->>BusinessLogic: list_of_places
    BusinessLogic-->>API: places_response(list_of_places)
    API-->>User: 200 OK (JSON list of places)
```

**Explanation:**  
- User requests a list of places with filters.  
- API passes the filters to the business logic.  
- Database query is executed with the filters.  
- A list of places is returned as JSON to the user.

---
