# Sequence Diagrams for HBnB API Calls

This document contains sequence diagrams (using Mermaid.js) and explanations for four different API calls in the HBnB application.  
Each diagram shows the interaction between the **Presentation Layer (API)**, **Business Logic Layer (Models/Services)**, and **Persistence Layer (Database)**.

---

## 1. User Registration

```mermaid
sequenceDiagram
participant User
participant API
participant UserEntity
participant Database

User->>API: POST /register (user info)
API->>UserEntity: validate() & create()
UserEntity->>Database: save()
Database-->>UserEntity: confirm save
UserEntity-->>API: return created user
API-->>User: return success + user ID

```

**Explanation:**  
- User sends registration details to the API.  
- API forwards the data to the UserEntity for validation and processing.  
- User data is inserted into the database.  
- A success response with a new `user_id` is returned.

---

## 2. Place Creation

```mermaid
sequenceDiagram
participant Owner
participant API
participant PlaceEntity
participant Database

Owner->>API: POST /places (place info)
API->>PlaceEntity: create() & validate()
PlaceEntity->>Database: save()
Database-->>PlaceEntity: confirm save
PlaceEntity-->>API: return place ID
API-->>Owner: return success + place info

```

**Explanation:**  
- User sends a request to create a new place.  
- API passes the request to the PlaceEntity.  
- The PlaceEntity creates a `Place` object and saves it to the database.  
- API responds with the new `place_id`.

---

## 3. Review Submission

```mermaid
sequenceDiagram
participant UserClient
participant API
participant ReviewEntity
participant PlaceEntity
participant Database

UserClient->>API: POST /places/:id/reviews (review info)
API->>ReviewEntity: create() & validate()
ReviewEntity->>PlaceEntity: link review to place
ReviewEntity->>Database: save()
Database-->>ReviewEntity: confirm save
ReviewEntity-->>API: return review ID
API-->>UserClient: return success + review info

```

**Explanation:**  
- User submits a review for a place.  
- API validates the request and forwards it to the RewiewEntity which is linked to a PlaceEntity.  
- Review is stored in the database.  
- API confirms creation with a `review_id`.

---

## 4. Fetching a List of Places

```mermaid
sequenceDiagram
participant User
participant API
participant PlaceEntity
participant Database

User->>API: GET /places?filters
API->>PlaceEntity: fetchList(filters)
PlaceEntity->>Database: query(filters)
Database-->>PlaceEntity: return list of places
PlaceEntity-->>API: return places
API-->>User: return list of places

```

**Explanation:**  
- User requests a list of places with filters.  
- API passes the filters to the PlaceEntity.  
- Database query is executed with the filters.  
- A list of places is returned to the user.

---
=======
# Sequence Diagrams for API Calls

## Explanatory Notes

These sequence diagrams illustrate how the system components interact to perform key operations through the API. Each scenario involves communication between the frontend (Client), the Presentation Layer (API), the Business Logic Layer (Logic), and the Persistence Layer (Database).

---

### 1. **User Registration**

**Description**: Handles user signup by validating input, hashing passwords, storing user data, and returning a clean response.

---

### 2. **Place Creation**

**Description**: Allows a user to create a new place listing, validating and storing the data before returning the created object.

---

### 3. **Review Submission**

**Description**: Submits a review for a place. The system ensures proper authorization and stores the review data.

---

### 4. **Fetching a List of Places**

**Description**: Retrieves a list of places filtered by criteria, including nested data like reviews and amenities for each place.

